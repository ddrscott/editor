name = "monaco-editor"
main = "worker/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Custom domain
routes = [
  { pattern = "monaco.ljs.app", custom_domain = true }
]

# Serve static assets with binding to worker
[assets]
directory = "./dist"
binding = "ASSETS"

# Durable Objects
[durable_objects]
bindings = [
  { name = "SPACE_ROOM", class_name = "SpaceRoom" }
]

# Migration for Durable Objects with SQLite storage
[[migrations]]
tag = "v1"
new_sqlite_classes = ["SpaceRoom"]

# D1 Database for global space queries
[[d1_databases]]
binding = "DB"
database_name = "monaco-spaces"
database_id = "c0722e49-e154-470a-b394-5e5a97a13cef"
migrations_dir = "migrations"

# Development settings
[dev]
port = 8787
